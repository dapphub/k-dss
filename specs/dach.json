{
    "path": "dss/out/Dach.abi",
    "vars": {
        "VatLike" : "address"
    },
    "stores": {
        "#Dach.VatLike" : "VatLike"
    },
    "methods": {
        "nonces": {
            "vars" : {
                "Wad" : "uint256"            
            },
            "stores" : {
                "#Dach.nonces(ABI_lad)" : "Wad"
            },
            "requires" : [
            ],
            "returns" : "Wad : .WordStack"
        },
        "clear": {
            "vars" : {
                "ABI_src"    : "address",
                "ABI_dst"    : "address",
                "ABI_amount" : "uint256",
                "ABI_fee"    : "uint256",
                "ABI_nonce"  : "uint256",
                "ABI_r"      : "uint256",
                "ABI_s"      : "uint256",
                "ABI_v"      : "uint8",
                "Nonce" : "uint256",
                "Caller_dai" : "int256",
                "Src_dai"    : "int256",
                "Dst_dai"    : "int256"
            },
            "stores" : {
                "#Dach.nonces(ABI_src)" : "Nonce => Nonce +Int 1"
            },
            "foreign_stores" : {
                "VatLike" : {
                    "#Vat.dai(ABI_src)" : "#unsigned(Src_dai) => #unsigned(Src_dai) -Int ABI_fee -Int ABI_amount",
                    "#Vat.dai(ABI_dst)" : "#unsigned(Dst_dai) => #unsigned(Dst_dai) +Int ABI_amount",
                    "#Vat.dai(CALLER_ID)" : "#unsigned(Caller_dai) => #unsigned(Caller_dai) +Int ABI_fee"
                }
            },
            "requires" : [
                "#rangeUInt(256, #unsigned(Src_dai) -Int ABI_fee -Int ABI_amount)",
                "#rangeUInt(256, #unsigned(Dst_dai) +Int ABI_amount)",
                "#rangeUInt(256, #unsigned(Caller_dai) +Int ABI_fee)",
                "(#sender(#unparseByteStack(#asByteStack(keccak(#encodeArgs( #string(\"\\x19\\x01\"), #bytes32(DOMAIN_SEPARATOR), #bytes32(keccak(#encodeArgs( bytes32(CHEQUE_TYPEHASH), #address(ABI_src), #address(ABI_dst), #uint256(ABI_wad),  #uint256(ABI_fee), #uint256(ABI_nonce)))))))), ABI_v, #unparseByteStack(#asByteStack(ABI_r)), #unparseByteStack(#asByteStack(ABI_s))) ==Int ABI_src)"
            ],
            "returns" : ""
        }
    }
}
